<!--HEAD MODULARIZADO-->
<%- include('./partials/head.ejs')%>
<!--HEADER MODULARIZADO-->
<%- include('./partials/header.ejs')%>
<div>
  <a
    href="https://api.whatsapp.com/send?phone=5491123417991&text=%C2%A1Hola!%20Quer%C3%ADa%20saber%20m%C3%A1s%20informaci%C3%B3n%20para%20realizar%20la%20operaci%C3%B3n"
    class="whatsapp"
    target="_blank"
    ><span class="help">¿Necesitas ayuda?</span>
    <i class="fa fa-whatsapp my-float"></i>
  </a>
</div>
<div class="col-12 col-xxl-9">
  <div class="card flex-grow-1 saw-table">
    <div class="row">
      <div class="d-flex justify-content-evenly">
        <div class="col-12 col-md-4 d-flex justify-content-center">
          <h2 class="">Lista de clientes</h2>
        </div>
        <div class="col-12 col-md-4 d-flex justify-content-center form-outline">
          <input
            type="search"
            placeholder="Buscador..."
            id="form1"
            class="form-control"
          />
        </div>

        <div class="col-12 col-md-4 d-flex justify-content-center">
          <div class="dropdown">
            <button
              type="button"
              class="btn btn-sm btn-sa-muted d-block"
              id="widget-context-menu-6"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              aria-label="More"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="3"
                height="13"
                fill="currentColor"
              >
                <path
                  d="M1.5,8C0.7,8,0,7.3,0,6.5S0.7,5,1.5,5S3,5.7,3,6.5S2.3,8,1.5,8z M1.5,3C0.7,3,0,2.3,0,1.5S0.7,0,1.5,0 S3,0.7,3,1.5S2.3,3,1.5,3z M1.5,10C2.3,10,3,10.7,3,11.5S2.3,13,1.5,13S0,12.3,0,11.5S0.7,10,1.5,10z"
                ></path>
              </svg>
            </button>
            <ul
              class="dropdown-menu dropdown-menu-end"
              aria-labelledby="widget-context-menu-6"
            >
              <li><a class="dropdown-item" href="#">Settings</a></li>
              <li><a class="dropdown-item" href="#">Move</a></li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item text-danger" href="#">Remove</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="saw-table__body sa-widget-table m-10 overflow-auto">
      <table>
        <thead>
          <tr>
            <th>N° Orden.</th>
            <th>Cliente</th>
            <th>Estado</th>
            <th>Fecha</th>
          </tr>
        </thead>
        <tbody>
          <% listClient.forEach((client) =>{ %>
          <!-- Modal -->
          <div
            class="modal fade"
            id="modalClient<%= client.orden %>"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Datos del cliente <%=client.orden%>
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Nombre Completo:
                    <span class="modal-title" id="nombre"
                      ><%= client.nombreCompleto %> asds
                    </span>
                  </h5>
                  <h5 class="modal-title" id="exampleModalLabel">
                    Correo personal:
                    <span class="modal-title" id="nombre"
                      ><%= client.correoPersonal %>
                    </span>
                  </h5>
                  <h5 class="modal-title" id="exampleModalLabel">
                    Telefono:
                    <span class="modal-title" id="nombre"
                      ><%= client.telefono %>
                    </span>
                  </h5>
                  <h5 class="modal-title" id="exampleModalLabel">
                    Campo Adicional 1: 
                    <span class="modal-title" id="nombre"
                      ><%= client.campoAdicional%>
                    </span>
                  </h5>
                  <h5 class="modal-title" id="exampleModalLabel">
                    Campo Adicional 2:
                    <span class="modal-title" id="nombre"
                      ><%= client.campoAdiciona2%>
                    </span>
                  </h5>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </div>
          <tr>
            <td>
              <a
                class="btn btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#modalClient<%= client.orden %>"
              >
                <%= client.orden %>
              </a>
            </td>
            <td>
              <div class="d-flex fs-6">
                <div class="badge badge-sa-primary">
                  <a
                    class="modalClient"
                    data-bs-toggle="modal"
                    data-bs-target="#modalClient"
                  >
                    <%= client.nomCompleto %>
                  </a>
                </div>
              </div>
            </td>
            <td>
              <div class="d-flex fs-6">
                <div class="badge badge-sa-primary">
                  <div class="selectbox">
                    <div
                      class="select"
                      id="select<%=client.orden%>"
                      onclick="actionSelector(event, '<%=client.orden%>')"
                    >
                      <div class="contenido-select<%=client.orden%>" id="contenido-select<%=client.orden%>">
                        <div class="contenido-opcion">
                          <img
                            src="../img/status/<%= client.estado %>.png"
                            alt="<% client.estado %>"
                          />
                        </div>
                      </div>
                      <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="opciones" id="opciones<%=client.orden%>">
                      <a href="#" class="opcion" onclick="actionSelected(event,'<%=client.orden%>', 'realizado', '<%=client._id%>')">
                        <div class="contenido-opcion">
                          <img
                            src="../img/status/realizado.png"
                            alt="realizado"
                          />
                        </div>
                      </a>
                      <a href="#" class="opcion" onclick="actionSelected(event,'<%=client.orden%>', 'cancelado', '<%=client._id%>')" >
                        <div class="contenido-opcion">
                          <img
                            src="../img/status/cancelado.png"
                            alt="cancelado"
                          />
                        </div>
                      </a>
                      <a href="#" class="opcion" onclick="actionSelected(event,'<%=client.orden%>', 'pendiente', '<%=client._id%>')">
                        <div class="contenido-opcion">
                          <img
                            src="../img/status/pendiente.png"
                            alt="pendiente"
                          />
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </td>
            <td>
              <div class="d-flex align-items-center">
                <div><%= client.created_at %></div>
              </div>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%- include('./partials/footer.ejs') %>
<script src="/javascripts/<%=viewListClient%>"></script>
